{% extends "core/base.html" %}
{% load static %}
{% block item %}active{% endblock item %}
{% block content %}
<br><br>
  <!-- Header End --> 
<div class="header-carousel-fluid">
    <div id="carouselId" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false">
        <ol class="carousel-indicators">
            <li data-bs-target="#carouselId" data-bs-slide-to="0" class="active" aria-current="true" aria-label="First slide"></li>
            <li data-bs-target="#carouselId" data-bs-slide-to="1" aria-label="Second slide"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
            <!-- Carousel Item with Blue Fade -->
            <div class="carousel-item active position-relative" style="position: relative;">
                <img src="{% static 'img/fact-bg.jpg' %}" class="img-fluid w-100" style="height: 700px; width: 100%; object-fit: cover;"  alt="First slide" />

                <!-- Blue fade overlay using inline style -->
                <div style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(180deg, rgba(0, 0, 255, 0.5) 0%, rgba(0, 0, 255, 0.2) 50%, rgba(0, 0, 255, 0) 100%);
                    z-index: 1;
                    pointer-events: none;">
                </div>

                <div class="carousel-caption d-flex justify-content-center align-items-center" style="z-index: 4;">
                    <div class="container py-4" style="height: auto; max-height:115%;">
                        <div class="row g-5 justify-content-center">
                            <!-- Increase the width of the form container -->
                            <div class="col-lg-7 col-md-9">
                                <!-- Form Container -->
                                <div class="bg-secondary text-center fadeInLeft animated"
                                          style="background: rgba(0, 0, 0, 0.75); 
                                                padding-left: 20px; 
                                                padding-right: 50px; 
                                                padding-top: 10px; 
                                                padding-bottom: 40px;" 
                                        data-animation="fadeInLeft" 
                                        data-delay="1s">
                                    <h4 class="display-6" style="color:white; margin-top: 10px; margin-bottom: 20px;">
                                        <img src="{% static 'img/car-icon.png' %}" alt="Car Icon" style="width: 50px; height: auto; margin-right: 10px;">
                                        Add New Car
                                    </h4>
                                
                                    <form action="." method="post" enctype="multipart/form-data" class="d-flex flex-column justify-content-center align-items-center">
                                        {% csrf_token %}
                                        <div class="row g-2 justify-content-center"> 
                                            <div class="col-10">
                                                <table class="table table-borderless" style="width: 100%; margin-bottom: 0;">
                                                    <tbody>
                                                        <tr class="text-center">
                                                            <!-- Existing Category Dropdown -->
                                                            <td class="text-center" style="padding-right: 0;">
                                                                {{ form.category.label_tag }}
                                                            </td>
                                                            <td class="text-center" style="padding-left: 0;">
                                                                <select name="category" id="id_category" class="form-control square-select" style="margin: 0; width: 100%;">
                                                                    <option value="" disabled selected>--------------------------------------</option>
                                                                    {% for choice in form.category.field.queryset %}
                                                                    <option value="{{ choice.id }}" {% if choice.id == form.category.value %}selected{% endif %}>
                                                                        {{ choice.name }}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        
                                                        <!-- Row for New Category Input -->
                                                        <tr class="text-center">
                                                            <td class="text-center" style="padding-right: 0;">
                                                                {{ form.new_category.label_tag }}
                                                            </td>
                                                            <td class="text-center" style="padding-left: 0;">
                                                                <!-- Make the input field for new category the same size and style as the dropdown -->
                                                                <input type="text" name="new_category" id="id_new_category" class="form-control square-select" style="margin: 0; width: 100%;" placeholder="Or Add New Category">
                                                            </td>
                                                        </tr>
                                                        
                                                    
                                                    </tbody>
                                                </table>
                                            </div> 

       <div class="col-10 col-lg-6">
                                                            <table class="table table-borderless">
                                                                
                                                                <tbody>
                                                                   
                                
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.name.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.name }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.company.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.company }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.model.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.model }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.seats.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.seats }}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
            
                                                        <div class="col-12 col-lg-6">
                                                            <table class="table table-borderless">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.fuel_type.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.fuel_type }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.gear_type.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.gear_type }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.price.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.price }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-right" style="padding-right: 5px;">{{ form.description.label_tag }}</td>
                                                                        <td style="padding-left: 5px;">{{ form.description }}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
            
                                                        <div class="col-12">
                                                            <table class="table table-borderless">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="text-center">
                                                                            {{ form.image.label_tag }}
                                                                        </td>
                                                                        <td class="text-center">
                                                                            {{ form.image }}
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
            
                                                        <div class="col-12 text-center" style="margin-top: 5px; margin-bottom: 5px;">
                                                            <button type="submit" class="btn btn-outline-light btn-lg">Add car</button>
                                                        </div>
            
                                                    </div>
                                                    {% if form.errors %}
                                                    <div class="mb-3 p-6 bg-red-100 rounded-xl" style="margin-top: 10px; color: white;">
                                                        <ul>
                                                            {% for field in form %}
                                                            {% for error in field.errors %}
                                                            <li>{{ error }}</li>
                                                            {% endfor %}
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                    {% endif %}
                                                </form>
                                            </div>
                                        </div> <!-- End of form column -->
                                    </div>
                                </div>
                               
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br> <br>
            {% endblock content %}